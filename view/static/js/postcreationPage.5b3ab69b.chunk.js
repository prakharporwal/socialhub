"use strict";(self.webpackChunkreact_view=self.webpackChunkreact_view||[]).push([[561],{6699:(e,t,s)=>{s.d(t,{Z:()=>n});const r={dev:{api_server_url:"http://localhost:8080",path_prefix:"/api"},lan:{api_server_url:"http://192.168.0.184:8080",path_prefix:"/api"},prod:{api_server_url:"https://api.sociohub.live",path_prefix:"/api"}},n=r.prod},6443:(e,t,s)=>{s.d(t,{Z:()=>a});s(9867);var r=s(4670),n=s(4438),o=s(7973),i=s(2834);const a=e=>function(t){const s=(0,n.a)();return(0,i.jsx)(o.xu,{h:"calc(100vh - 4rem)",overflowY:"auto",children:s.isAuthenticated?(0,i.jsx)(e,{...t}):(0,i.jsx)(r.Fg,{to:"/signin",replace:!0})})}},4438:(e,t,s)=>{s.d(t,{a:()=>o});var r=s(9867),n=s(2733);function o(){const e=(0,r.useMemo)((()=>(0,n.e)("access_token")),[]),[t,s]=(0,r.useState)(null!=e&&void 0!==e&&""!==e);return{isAuthenticated:t,accessToken:e}}},4980:(e,t,s)=>{s.r(t),s.d(t,{default:()=>P});var r=s(7973),n=s(9867),o=s(7200),i=s(7254),a=s(8216),c=s(3145),l=s(9274),d=s(4458),u=s(5721),h=s(348),p=s(1429),m=s(2678),g=s(1914),x=s(3727),j=s(2102),f=s(8910),y=s(295),v=s(4825),b=s(8381),w=s(4997),S=s(4438),k=s(6443),T=s(6699),C=s(3967),I=s(9333),_=s(2834);function E(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString()}const N=(0,k.Z)((()=>{const e=(0,o.p)(),t=(0,S.a)(),[s,k]=(0,n.useState)("text"),[N,P]=(0,n.useState)(""),[A,O]=(0,n.useState)(!1),[D,R]=(0,n.useState)(new Map),[F,H]=(0,n.useState)(!1),[L,M]=(0,n.useState)(E(new Date)),[z,B]=(0,n.useState)(!0),[W,Z]=(0,n.useState)([{value:"monday",id:1},{value:"tuesday",id:2}]),J=e=>{D.set(e.currentTarget.id,e.currentTarget.checked),R(new Map(D))};return(0,_.jsx)(r.xu,{children:(0,_.jsx)(i.k,{align:"center",justify:"center",direction:"column",children:(0,_.jsx)(i.k,{gap:4,mx:"auto",width:"full",py:4,px:4,children:(0,_.jsx)(r.xu,{borderWidth:"2px",rounded:"lg",shadow:"2px 2px 3px rgba(0,0,0,0.3)",minWidth:{base:"full",sm:"50%"},bg:(0,a.ff)("white","gray.700"),p:8,m:"4",children:(0,_.jsx)(c.M,{columns:1,spacing:6,children:(0,_.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),O(!0),""===N||""===s)return O(!1),void(e.isActive("post-submit-error")||e({id:"post-submit-error",status:"error",title:"Form Empty",description:"Content and type cannot be empty"}));const r=Array.from(D,(e=>{let[t,s]=e;if(s)return console.log(t),t})),n={post_text:N,post_type:"TEXT",creation_status:"COMPLETED",platforms:r};I.Z.post("/p/v1/posts",n).then((()=>{e.isActive("post-submit-success")||e({id:"post-submit-success",status:"success",title:"Post submitted successfully"})})).catch((t=>{var s,r;e.isActive("post-submit-error")||e({id:"post-submit-error",title:"Failed to submit post",description:(null===(s=t.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"An unexpected error occurred"});console.error("Post submission error:",t)})).finally((()=>{O(!1)}))},children:[(0,_.jsxs)(l.NI,{as:d.P,colSpan:[3,2],isRequired:!0,children:[(0,_.jsx)(u.l,{htmlFor:"post_type",fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"gray.50"},children:"Post Type"}),(0,_.jsxs)(h.P,{id:"post_type",placeholder:"Select post type",value:s,variant:"outline",w:"auto",onChange:e=>{k(e.currentTarget.value)},children:[(0,_.jsx)("option",{value:"image",disabled:!0,"aria-disabled":!0,children:"Image"}),(0,_.jsx)("option",{value:"poll",disabled:!0,"aria-disabled":!0,children:"Create a Poll"}),(0,_.jsx)("option",{value:"text",children:"Text"})]})]}),"poll"===s?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(l.NI,{mt:2,as:d.P,colSpan:[3,2],isRequired:!0,children:[(0,_.jsx)(u.l,{fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"white"},children:"Question"}),(0,_.jsx)(p.I,{p:2,placeholder:"Hey guys I just started using Socialhub",shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:N,onChange:e=>{P(e.currentTarget.value)}})]}),(0,_.jsxs)(l.NI,{mt:2,as:d.P,colSpan:[3,2],children:[(0,_.jsx)(m.E,{value:"1",onChange:()=>{},children:(0,_.jsx)(i.k,{direction:"column",children:W.map((e=>(0,_.jsx)(g.Y,{value:e.value,textTransform:"capitalize",children:e.value},e.id)))})}),(0,_.jsx)(l.Q6,{children:"Brief description for your profile. URLs are hyperlinked."})]})]}):(0,_.jsxs)(l.NI,{mt:2,as:d.P,colSpan:[3,2],isRequired:!0,children:[(0,_.jsx)(x.g,{p:2,placeholder:"Hey guys I just started using Socialhub",rows:10,shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:N,onChange:e=>{P(e.currentTarget.value)}}),(0,_.jsx)(l.Q6,{children:" "})]}),(0,_.jsxs)(l.NI,{as:c.M,columns:{base:2,lg:4},children:[(0,_.jsx)(u.l,{htmlFor:"TWITTER",children:"Twitter"}),(0,_.jsx)(j.r,{id:"TWITTER",marginRight:"auto",isChecked:D.get("TWITTER"),onChange:J}),(0,_.jsx)(u.l,{htmlFor:"LINKEDIN",children:"Linkedin"}),(0,_.jsx)(j.r,{id:"LINKEDIN",marginRight:"auto",isChecked:D.get("LINKEDIN"),onChange:J}),(0,_.jsx)(u.l,{htmlFor:"INSTAGRAM",children:"Instagram"}),(0,_.jsx)(j.r,{id:"INSTAGRAM",marginRight:"auto",isChecked:D.get("INSTAGRAM"),onChange:J}),(0,_.jsx)(u.l,{htmlFor:"FACEBOOK",children:"Facebook"}),(0,_.jsx)(j.r,{id:"FACEBOOK",marginRight:"auto",isChecked:D.get("FACEBOOK"),onChange:J})]}),(0,_.jsx)(l.NI,{children:(0,_.jsxs)(i.k,{gap:8,children:[(0,_.jsx)(f.L,{}),z?(0,_.jsxs)(i.k,{dir:"row",gap:4,children:[(0,_.jsx)(y.z,{type:"submit",colorScheme:"blue",w:"full",maxW:"md",isLoading:A,onClick:()=>{},children:(0,_.jsx)(v.M,{children:(0,_.jsx)(b.x,{children:"Post"})})}),(0,_.jsx)(w.h,{icon:(0,_.jsx)(C.qyc,{}),"aria-label":"schedule post",onClick:()=>{B(!z)}})]}):(0,_.jsxs)(i.k,{gap:8,children:[(0,_.jsxs)(i.k,{dir:"row",gap:4,children:[(0,_.jsx)(y.z,{_hover:{bg:"blue.600",color:"white"},colorScheme:"linkedin",variant:"outline",w:"full",maxW:"md",leftIcon:(0,_.jsx)(C.qyc,{}),isLoading:F,onClick:function(){let r=new Date(L),n=new Date(r.getTime()+6e4*r.getTimezoneOffset()).toISOString();console.log(n),""!==N?(H(!0),fetch(T.Z.api_server_url+"/api/p/linkedin/schedule/post",{method:"POST",headers:{"access-token":t.accessToken||""},body:JSON.stringify({post_type:s,post_json:{author:"",commentary:N,visibility:"PUBLIC",distribution:{feedDistribution:"MAIN_FEED",targetEntities:[],thirdPartyDistributionChannels:[]},lifecycleState:"PUBLISHED",isReshareDisabledByAuthor:!1},scheduled_at:n})}).then((e=>{if(e.ok)return e.json();throw new Error("Error scheduling post!")})).then((t=>{console.log(t),e({status:"success",title:"Submitted post for scheduling",duration:5e3})})).catch((()=>{})).finally((()=>{H(!1)}))):e.isActive("post-empty")||e({id:"post-empty",status:"error",title:"Post content is empty!"})},children:(0,_.jsx)(v.M,{children:(0,_.jsx)(b.x,{children:"Schedule Post"})})}),(0,_.jsx)(w.h,{icon:(0,_.jsx)(C.qyc,{}),"aria-label":"schedule post",onClick:()=>{B(!z)}})]}),(0,_.jsx)(p.I,{colorScheme:"blue",type:"datetime-local",value:L.substring(0,16),onChange:e=>{console.log(new Date(e.currentTarget.value));const t=E(new Date(e.currentTarget.value));M(t)}})]})]})})]})})})})})})}));function P(){return(0,_.jsx)(r.xu,{children:(0,_.jsx)(N,{})})}},9333:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(6699),n=s(2733);const o=new class{constructor(){var e;this.apiHostname=void 0,this.apiHostname=r.Z.api_server_url.concat(null!==(e=r.Z.path_prefix)&&void 0!==e?e:"")}getCommonHeaders(){return{"content-type":"application/json","access-token":(0,n.e)("access_token")||"no token found!"}}async get(e,t){return new Promise(((s,r)=>{fetch(this.apiHostname.concat(e),{headers:{...this.getCommonHeaders(),...t&&t.headers},method:"GET"}).then((async e=>{if(e.ok||201===e.status)return e.json();let t=await e.json();throw new Error(JSON.stringify(t))})).then((e=>{s(e)})).catch((e=>{r(e)}))}))}async post(e,t,s){return new Promise(((r,n)=>{fetch(this.apiHostname.concat(e),{headers:{...this.getCommonHeaders(),...s&&s.headers},method:"POST",body:t&&JSON.stringify(t)}).then((async e=>{if(e.ok||201===e.status)return e.json();let t=await e.json();throw new Error(JSON.stringify(t))})).then((e=>{r(e)})).catch((e=>{n(e)}))}))}async put(e,t,s){return new Promise(((r,n)=>{fetch(this.apiHostname.concat(e),{headers:{...this.getCommonHeaders(),...s&&s.headers},method:"PUT",body:t&&JSON.stringify(t)}).then((async e=>{if(e.ok||201===e.status)return e.json();let t={};throw await e.json().then((e=>{t=e})),new Error(JSON.stringify(t))})).then((e=>{r(e)})).catch((e=>{n(e)}))}))}async delete(e,t){return new Promise(((s,r)=>{fetch(this.apiHostname.concat(e),{headers:{...this.getCommonHeaders(),...t&&t.headers},method:"DELETE"}).then((async e=>{if(e.ok||201===e.status)return e.json();let t={};throw await e.json().then((e=>{t=e})),new Error(JSON.stringify(t))})).then((e=>{s(e)})).catch((e=>{r(e)}))}))}};console.log("ApiCaller",o);const i=o},2733:(e,t,s)=>{function r(e){const t=e.length+1;return document.cookie.split(";").map((e=>e.trim())).filter((s=>s.substring(0,t)===`${e}=`)).map((e=>decodeURIComponent(e.substring(t))))[0]||null}s.d(t,{e:()=>r})}}]);
//# sourceMappingURL=postcreationPage.5b3ab69b.chunk.js.map