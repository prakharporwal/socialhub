"use strict";(self.webpackChunkreact_view=self.webpackChunkreact_view||[]).push([[840],{6699:function(e,t,n){n.d(t,{Z:function(){return r}});var r={api_server_url:"https://api.sociohub.live",path_prefix:"/api"}},6443:function(e,t,n){var r=n(1413),i=(n(9867),n(4670)),s=n(4438),o=n(7973),a=n(2834);t.Z=function(e){return function(t){var n=(0,s.a)();return(0,a.jsx)(o.xu,{h:"calc(100vh - 4rem)",overflowY:"auto",children:n.isAuthenticated?(0,a.jsx)(e,(0,r.Z)({},t)):(0,a.jsx)(i.Fg,{to:"/signin",replace:!0})})}}},4438:function(e,t,n){n.d(t,{a:function(){return o}});var r=n(9439),i=n(9867),s=n(2733);function o(){var e=(0,i.useMemo)((function(){return(0,s.e)("access_token")}),[]),t=(0,i.useState)(null!=e&&void 0!==e&&""!==e),n=(0,r.Z)(t,2),o=n[0];n[1];return{isAuthenticated:o,accessToken:e}}},4980:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(9439),i=n(9867),s=n(4165),o=n(5861),a=n(7200),c=n(7973),u=n(7254),l=n(7194),d=n(8216),h=n(3145),f=n(9274),p=n(4458),m=n(5721),x=n(348),g=n(1429),v=n(2678),b=n(1914),y=n(3727),j=n(2102),k=n(8910),w=n(295),Z=n(4825),S=n(8381),T=n(4997),P=n(4438),_=n(6443),C=n(6699),I=n(3967),N=n(2834);function O(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString()}var E=(0,_.Z)((function(){var e=(0,a.p)(),t=(0,P.a)(),n=(0,i.useState)("text"),_=(0,r.Z)(n,2),E=_[0],D=_[1],H=(0,i.useState)(""),F=(0,r.Z)(H,2),J=F[0],A=F[1],L=(0,i.useState)(!1),R=(0,r.Z)(L,2),z=R[0],B=R[1],M=(0,i.useState)(!1),U=(0,r.Z)(M,2),q=U[0],W=U[1],K=(0,i.useState)(!1),Q=(0,r.Z)(K,2),Y=Q[0],G=Q[1],V=(0,i.useState)(!1),X=(0,r.Z)(V,2),$=X[0],ee=X[1],te=(0,i.useState)(O(new Date)),ne=(0,r.Z)(te,2),re=ne[0],ie=ne[1],se=(0,i.useState)(!0),oe=(0,r.Z)(se,2),ae=oe[0],ce=oe[1],ue=(0,i.useState)([{value:"monday",id:1},{value:"tuesday",id:2}]),le=(0,r.Z)(ue,2),de=le[0],he=(le[1],function(){var n=(0,o.Z)((0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(B(!0),""!==J&&""!==E){n.next=5;break}return B(!1),e.isActive("post-submit-error")||e({id:"post-submit-error",status:"error",title:"Form Empty",description:"Content and type cannot be empty"}),n.abrupt("return");case 5:if(!Y){n.next=8;break}return n.next=8,fetch(C.Z.api_server_url+"/api/p/linkedin/post",{headers:{"access-token":t.accessToken||""},method:"POST",body:JSON.stringify({content_type:E,text:J,data:{author:"",commentary:J,visibility:"PUBLIC",distribution:{feedDistribution:"MAIN_FEED",targetEntities:[],thirdPartyDistributionChannels:[]},lifecycleState:"PUBLISHED",isReshareDisabledByAuthor:!1}})}).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return n={},e.next=5,t.json().then((function(e){n=e}));case 5:throw new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.isActive("post-submit-api-success")||e({id:"post-submit-api-success",status:"success",title:"Submitted Post to Linkedin",description:"Posting now depends on linkedin"})})).catch((function(t){console.log("error",JSON.parse(null===t||void 0===t?void 0:t.message).error),e.isActive("post-submit-api-error")||e({id:"post-submit-api-error",status:"error",title:"Posting Failed for Linkedin",description:JSON.parse(null===t||void 0===t?void 0:t.message).error})})).finally((function(){console.log(J,E),B(!1)}));case 8:if(!q){n.next=13;break}return n.next=11,fetch(C.Z.api_server_url+"/api/p/twitter/tweets/create",{headers:{"access-token":t.accessToken||""},method:"POST",body:JSON.stringify({text:J})}).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.json(),!t.ok&&201!==t.status){e.next=3;break}return e.abrupt("return",n);case 3:throw new Error(JSON.stringify({body:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.isActive("post-submit-api-success")||e({id:"twitter-submit-api-success",status:"success",title:"Submitted Post to Twitter",description:"Posting now depends on twitter"})})).catch((function(t){console.log("error",JSON.parse(null===t||void 0===t?void 0:t.message).error),e.isActive("post-submit-api-error")||e({id:"twitter-submit-api-error",status:"error",title:"Posting Failed For Twitter!",description:JSON.parse(null===t||void 0===t?void 0:t.message).error})})).finally((function(){console.log(J,E),B(!1)}));case 11:n.next=14;break;case 13:B(!1);case 14:return n.abrupt("return");case 15:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}());return(0,N.jsx)(c.xu,{children:(0,N.jsx)(u.k,{minH:"80vh",align:"center",justify:"center",direction:"column",children:(0,N.jsx)(l.K,{spacing:4,mx:"auto",width:"full",py:4,px:4,children:(0,N.jsx)(c.xu,{borderWidth:"2px",rounded:"lg",shadow:"2px 2px 3px rgba(0,0,0,0.3)",minWidth:{base:"full",sm:"96"},bg:(0,d.ff)("white","gray.700"),p:8,m:"10px auto",as:"form",children:(0,N.jsx)(h.M,{columns:1,spacing:6,children:(0,N.jsxs)("form",{children:[(0,N.jsxs)(f.NI,{as:p.P,colSpan:[3,2],isRequired:!0,children:[(0,N.jsx)(m.l,{fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"gray.50"},children:"Post Type"}),(0,N.jsxs)(x.P,{placeholder:"Select post type",value:E,variant:"outline",w:"auto",onChange:function(e){D(e.currentTarget.value)},children:[(0,N.jsx)("option",{value:"image",disabled:!0,"aria-disabled":!0,children:"Image"}),(0,N.jsx)("option",{value:"poll",disabled:!0,"aria-disabled":!0,children:"Create a Poll"}),(0,N.jsx)("option",{value:"text",children:"Text"})]})]}),"poll"===E?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(f.NI,{mt:2,as:p.P,colSpan:[3,2],isRequired:!0,children:[(0,N.jsx)(m.l,{fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"white"},children:"Question"}),(0,N.jsx)(g.I,{p:2,placeholder:"Hey guys I just started using Socialhub",shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:J,onChange:function(e){A(e.currentTarget.value)}})]}),(0,N.jsxs)(f.NI,{mt:2,as:p.P,colSpan:[3,2],children:[(0,N.jsx)(v.E,{value:"1",onChange:function(){},children:(0,N.jsx)(l.K,{direction:"column",children:de.map((function(e){return(0,N.jsx)(b.Y,{value:e.value,textTransform:"capitalize",children:e.value},e.id)}))})}),(0,N.jsx)(f.Q6,{children:"Brief description for your profile. URLs are hyperlinked."})]})]}):(0,N.jsxs)(f.NI,{mt:2,as:p.P,colSpan:[3,2],isRequired:!0,children:[(0,N.jsx)(y.g,{p:2,placeholder:"Hey guys I just started using Socialhub",rows:10,shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:J,onChange:function(e){A(e.currentTarget.value)}}),(0,N.jsx)(f.Q6,{children:" "})]}),(0,N.jsxs)(f.NI,{as:h.M,columns:{base:2,lg:4},children:[(0,N.jsx)(m.l,{htmlFor:"isChecked",children:"Twitter"}),(0,N.jsx)(j.r,{id:"isChecked",marginRight:"auto",onChange:function(e){console.log(e.currentTarget.checked),W(e.currentTarget.checked)}}),(0,N.jsx)(m.l,{htmlFor:"isDisabled",children:"Linkedin"}),(0,N.jsx)(j.r,{id:"isDisabled",marginRight:"auto",onChange:function(e){console.log(e.currentTarget.checked),G(e.currentTarget.checked)}}),(0,N.jsx)(m.l,{htmlFor:"isFocusable",children:"Instagram"}),(0,N.jsx)(j.r,{id:"isFocusable",marginRight:"auto",isDisabled:!0}),(0,N.jsx)(m.l,{htmlFor:"isInvalid",children:"Facebook"}),(0,N.jsx)(j.r,{id:"isInvalid",marginRight:"auto",isDisabled:!0})]}),(0,N.jsx)(f.NI,{children:(0,N.jsxs)(l.K,{spacing:8,children:[(0,N.jsx)(k.L,{}),ae?(0,N.jsxs)(u.k,{dir:"row",gap:4,children:[(0,N.jsx)(w.z,{colorScheme:"blue",w:"full",maxW:"md",isLoading:z,onClick:he,children:(0,N.jsx)(Z.M,{children:(0,N.jsx)(S.x,{children:"Post on Socials"})})}),(0,N.jsx)(T.h,{icon:(0,N.jsx)(I.qyc,{}),"aria-label":"schedule post",onClick:function(){ce(!ae)}})]}):(0,N.jsxs)(l.K,{spacing:8,children:[(0,N.jsxs)(u.k,{dir:"row",gap:4,children:[(0,N.jsx)(w.z,{_hover:{bg:"blue.600",color:"white"},colorScheme:"linkedin",variant:"outline",w:"full",maxW:"md",leftIcon:(0,N.jsx)(I.qyc,{}),isLoading:$,onClick:function(){var n=new Date(re),r=new Date(n.getTime()+6e4*n.getTimezoneOffset()).toISOString();console.log(r),""!==J?(ee(!0),fetch(C.Z.api_server_url+"/api/p/linkedin/schedule/post",{method:"POST",headers:{"access-token":t.accessToken||""},body:JSON.stringify({post_type:E,post_json:{author:"",commentary:J,visibility:"PUBLIC",distribution:{feedDistribution:"MAIN_FEED",targetEntities:[],thirdPartyDistributionChannels:[]},lifecycleState:"PUBLISHED",isReshareDisabledByAuthor:!1},scheduled_at:r})}).then((function(e){if(e.ok)return e.json();throw new Error("Error scheduling post!")})).then((function(t){console.log(t),e({status:"success",title:"Submitted post for scheduling",duration:5e3})})).catch((function(){})).finally((function(){ee(!1)}))):e.isActive("post-empty")||e({id:"post-empty",status:"error",title:"Post content is empty!"})},children:(0,N.jsx)(Z.M,{children:(0,N.jsx)(S.x,{children:"Schedule Post"})})}),(0,N.jsx)(T.h,{icon:(0,N.jsx)(I.qyc,{}),"aria-label":"schedule post",onClick:function(){ce(!ae)}})]}),(0,N.jsx)(g.I,{type:"datetime-local",value:re.substring(0,16),onChange:function(e){console.log(new Date(e.currentTarget.value));var t=O(new Date(e.currentTarget.value));ie(t)}})]})]})})]})})})})})})}));n(9333);function D(){var e=(0,i.useState)([]),t=(0,r.Z)(e,2);t[0],t[1];return(0,N.jsx)("div",{children:(0,N.jsx)(E,{})})}},9333:function(e,t,n){var r=n(4165),i=n(1413),s=n(5861),o=n(5671),a=n(3144),c=n(6699),u=n(2733),l=function(){function e(t,n){(0,o.Z)(this,e),this.apiHostname=void 0,this.commonHeaders=void 0,this.apiHostname=t.concat(null!==n&&void 0!==n?n:""),this.commonHeaders={"content-type":"application/json","access-token":(0,u.e)("access_token")||""}}return(0,a.Z)(e,[{key:"get",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var o=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){fetch(o.apiHostname.concat(t),{headers:(0,i.Z)((0,i.Z)({},o.commonHeaders),n&&n.headers),method:"GET"}).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:throw n=e.sent,new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e(t)})).catch((function(e){a(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n,o){var a=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){fetch(a.apiHostname.concat(t),{headers:(0,i.Z)((0,i.Z)({},a.commonHeaders),o&&o.headers),method:"POST",body:n&&JSON.stringify(n)}).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:throw n=e.sent,new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e(t)})).catch((function(e){c(e)})).finally((function(){}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"put",value:function(e,t,n){fetch(this.apiHostname.concat(e),{headers:(0,i.Z)((0,i.Z)({},this.commonHeaders),n&&n.headers),method:"PUT",body:t&&JSON.stringify(t)}).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return n={},e.next=5,t.json().then((function(e){n=e}));case 5:throw new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then().catch((function(){})).finally((function(){}))}},{key:"delete",value:function(e,t){fetch(this.apiHostname.concat(e),{headers:(0,i.Z)((0,i.Z)({},this.commonHeaders),t&&t.headers),method:"DELETE"}).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return n={},e.next=5,t.json().then((function(e){n=e}));case 5:throw new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then().catch((function(){})).finally((function(){}))}}]),e}(),d=new l(c.Z.api_server_url,c.Z.path_prefix);t.Z=d},2733:function(e,t,n){function r(e){var t=e.length+1;return document.cookie.split(";").map((function(e){return e.trim()})).filter((function(n){return n.substring(0,t)==="".concat(e,"=")})).map((function(e){return decodeURIComponent(e.substring(t))}))[0]||null}n.d(t,{e:function(){return r}})}}]);
//# sourceMappingURL=postcreationForm.7780c12b.chunk.js.map