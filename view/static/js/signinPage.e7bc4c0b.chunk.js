"use strict";(self.webpackChunkreact_view=self.webpackChunkreact_view||[]).push([[748],{8304:function(e,n){var i={api_server_url:"https://api.prakhar.works"};n.Z=i},7817:function(e,n,i){i.d(n,{Z:function(){return l}});i(9867);var t=i(7254),s=i(7194),r=i(681),o=i(7973),a=i(8216),c=i(2834),l=function(e){return(0,c.jsx)(t.k,{className:"signin-background",h:"100vh",align:"center",justify:"center",backgroundColor:"whitesmoke",children:(0,c.jsxs)(s.K,{spacing:4,mx:"auto",maxW:"lg",py:12,px:6,children:[(0,c.jsx)(s.K,{align:"center",children:(0,c.jsx)(r.X,{fontSize:"4xl",children:e.headingText})}),(0,c.jsx)(o.xu,{rounded:"lg",bg:(0,a.ff)("white","gray.700"),boxShadow:"lg",p:8,children:(0,c.jsx)(s.K,{spacing:4,children:e.children})})]})})}},5680:function(e,n,i){i.d(n,{a:function(){return r}});var t=i(9439),s=i(9867);function r(){var e=(0,s.useMemo)((function(){return function(e){var n=e.length+1;return document.cookie.split(";").map((function(e){return e.trim()})).filter((function(i){return i.substring(0,n)==="".concat(e,"=")})).map((function(e){return decodeURIComponent(e.substring(n))}))[0]||null}("access_token")}),[]),n=(0,s.useState)(null!=e&&void 0!==e&&""!==e),i=(0,t.Z)(n,2),r=i[0];i[1];return{isAuthenticated:r,accessToken:e}}},1958:function(e,n,i){i.r(n),i.d(n,{default:function(){return M}});var t=i(9439),s=i(9867),r=i(7200),o=i(9274),a=i(5721),c=i(1429),l=i(7194),u=i(5987),d=i(1413);var h=(0,i(631).k)({name:"CheckboxGroupContext",strict:!1}),g=(0,t.Z)(h,2),m=(g[0],g[1]),f=i(3689),p=i(2834),x=["isIndeterminate","isChecked"];function v(e){return(0,p.jsx)(f.m.svg,(0,d.Z)((0,d.Z)({width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16}},e),{},{children:(0,p.jsx)("polyline",{points:"1.5 6 4.5 9 10.5 1"})}))}function k(e){return(0,p.jsx)(f.m.svg,(0,d.Z)((0,d.Z)({width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4}},e),{},{children:(0,p.jsx)("line",{x1:"21",x2:"3",y1:"12",y2:"12"})}))}function b(e){var n=e.isIndeterminate,i=e.isChecked,t=(0,u.Z)(e,x),s=n?k:v;return i||n?(0,p.jsx)(f.m.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,p.jsx)(s,(0,d.Z)({},t))}):null}var j=i(9868),Z=i(9523),C=i(4923),_=i(9770),w=i(6833),y=i(9511),S=["spacing","className","children","iconColor","iconSize","icon","isChecked","isDisabled","onChange","inputProps"],I={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},N={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},P=(0,C.F4)({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),D=(0,C.F4)({from:{opacity:0},to:{opacity:1}}),L=(0,C.F4)({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),E=(0,_.G)((function(e,n){var i=m(),r=(0,d.Z)((0,d.Z)({},i),e),o=(0,w.jC)("Checkbox",r),a=(0,y.Lr)(e),c=a.spacing,l=void 0===c?"0.5rem":c,h=a.className,g=a.children,x=a.iconColor,v=a.iconSize,k=a.icon,C=void 0===k?(0,p.jsx)(b,{}):k,_=a.isChecked,E=a.isDisabled,T=void 0===E?null==i?void 0:i.isDisabled:E,A=a.onChange,z=a.inputProps,F=(0,u.Z)(a,S),K=_;(null==i?void 0:i.value)&&a.value&&(K=i.value.includes(a.value));var O=A;(null==i?void 0:i.onChange)&&a.value&&(O=(0,Z.PP)(i.onChange,A));var G=(0,j.O)((0,d.Z)((0,d.Z)({},F),{},{isDisabled:T,isChecked:K,onChange:O})),W=G.state,M=G.getInputProps,R=G.getCheckboxProps,X=G.getLabelProps,B=G.getRootProps,J=function(e){var n=(0,s.useState)(e),i=(0,t.Z)(n,2),r=i[0],o=i[1],a=(0,s.useState)(!1),c=(0,t.Z)(a,2),l=c[0],u=c[1];return e!==r&&(u(!0),o(e)),l}(W.isChecked),Q=(0,s.useMemo)((function(){return(0,d.Z)({animation:J?W.isIndeterminate?"".concat(D," 20ms linear, ").concat(L," 200ms linear"):"".concat(P," 200ms linear"):void 0,fontSize:v,color:x},o.icon)}),[x,v,J,W.isIndeterminate,o.icon]),U=(0,s.cloneElement)(C,{__css:Q,isIndeterminate:W.isIndeterminate,isChecked:W.isChecked});return(0,p.jsxs)(f.m.label,(0,d.Z)((0,d.Z)({__css:(0,d.Z)((0,d.Z)({},N),o.container),className:(0,Z.cx)("chakra-checkbox",h)},B()),{},{children:[(0,p.jsx)("input",(0,d.Z)({className:"chakra-checkbox__input"},M(z,n))),(0,p.jsx)(f.m.span,(0,d.Z)((0,d.Z)({__css:(0,d.Z)((0,d.Z)({},I),o.control),className:"chakra-checkbox__control"},R()),{},{children:U})),g&&(0,p.jsx)(f.m.span,(0,d.Z)((0,d.Z)({className:"chakra-checkbox__label"},X()),{},{__css:(0,d.Z)({marginStart:l},o.label),children:g}))]}))}));E.displayName="Checkbox";var T=i(1221),A=i(2265),z=i(5644),F=i(4670),K=i(8304),O=i(4720),G=i(7817),W=i(5680);O.ZP.initialize("G-DWQ4JNSKQE"),O.ZP.pageview(window.location.pathname+window.location.search);var M=function(e){var n=(0,s.useState)(""),i=(0,t.Z)(n,2),u=i[0],d=i[1],h=(0,s.useState)(""),g=(0,t.Z)(h,2),m=g[0],f=g[1],x=(0,s.useState)(""),v=(0,t.Z)(x,2),k=v[0],b=v[1],j=(0,s.useState)(!1),Z=(0,t.Z)(j,2),C=Z[0],_=Z[1],w=(0,s.useState)(!1),y=(0,t.Z)(w,2),S=y[0],I=y[1],N=(0,r.p)(),P=(0,W.a)(),D=(0,F.s0)();return(0,s.useEffect)((function(){P.isAuthenticated&&D("/home")}),[P]),(0,p.jsx)(G.Z,{headingText:"Signin into Organisation",children:(0,p.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),I(!0),""===u||""===m||""===k)return N.isActive("login-error")||N({id:"login-error",title:"Invalid data cannot be empty",description:"Email and Password Field empty",status:"error",duration:3e3,isClosable:!0}),void I(!1);console.log(m,k,C),fetch(K.Z.api_server_url+"/v1/login",{method:"POST",body:JSON.stringify({organisation_group_id:u,user_id:m,password:k})}).then((function(e){if(e.ok)return e.json();throw new Error("Incorrect credentials")})).then((function(e){console.log(e),window.localStorage.setItem("authenticated","true"),window.localStorage.setItem("current_username",e.username),window.localStorage.setItem("organisation_group_id",e.organisation_group_id),document.cookie="access_token="+e.access_token+";Path=/;Max-Age=18000;",N({title:"Login successful",description:"Logged in as {username}",status:"success",duration:3e3,isClosable:!0}),D("/home")})).catch((function(e){console.log(e),N.isActive("login-api-failed")||N({id:"login-api-failed",title:"Login Failed",description:e.message,status:"error",duration:3e3,isClosable:!0})})).finally((function(){I(!1)}))},children:[(0,p.jsxs)(o.NI,{id:"organisation-id",children:[(0,p.jsx)(a.l,{children:"Organisation Id"}),(0,p.jsx)(c.I,{type:"text",value:u,onChange:function(e){d(e.currentTarget.value)}})]}),(0,p.jsxs)(o.NI,{id:"email",children:[(0,p.jsx)(a.l,{children:"Email address"}),(0,p.jsx)(c.I,{type:"email",value:m,onChange:function(e){f(e.currentTarget.value)}})]}),(0,p.jsxs)(o.NI,{id:"password",children:[(0,p.jsx)(a.l,{children:"Password"}),(0,p.jsx)(c.I,{type:"password",value:k,onChange:function(e){b(e.currentTarget.value)}})]}),(0,p.jsx)(o.NI,{id:"submit-button",children:(0,p.jsxs)(l.K,{spacing:10,children:[(0,p.jsxs)(l.K,{direction:{base:"column",sm:"row"},align:"start",justify:"space-between",children:[(0,p.jsx)(E,{checked:C,onChange:function(e){_(e.currentTarget.checked)},children:"Remember me"}),(0,p.jsx)(T.r,{as:z.rU,to:"/forgot-password",color:"blue.400",children:"Forgot password?"})]}),(0,p.jsx)(A.z,{bg:"blue.400",color:"white",_hover:{bg:"blue.500"},_focus:{bg:"blue.500"},type:"submit",isLoading:S,children:"Sign in"}),(0,p.jsx)("div",{className:"g-signin2","data-onsuccess":"onSignIn"})]})})]})})}},1221:function(e,n,i){i.d(n,{r:function(){return h}});var t=i(1413),s=i(5987),r=i(9770),o=i(6833),a=i(9511),c=i(3689),l=i(9523),u=i(2834),d=["className","isExternal"],h=(0,r.G)((function(e,n){var i=(0,o.mq)("Link",e),r=(0,a.Lr)(e),h=r.className,g=r.isExternal,m=(0,s.Z)(r,d);return(0,u.jsx)(c.m.a,(0,t.Z)((0,t.Z)({target:g?"_blank":void 0,rel:g?"noopener":void 0,ref:n,className:(0,l.cx)("chakra-link",h)},m),{},{__css:i}))}));h.displayName="Link"}}]);
//# sourceMappingURL=signinPage.e7bc4c0b.chunk.js.map