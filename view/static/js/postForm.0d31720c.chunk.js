"use strict";(self.webpackChunkreact_view=self.webpackChunkreact_view||[]).push([[160],{8304:function(e,t){var n={api_server_url:"http://192.168.0.184:8080"};t.Z=n},1571:function(e,t,n){n.r(t);var r=n(4165),i=n(5861),s=n(9439),o=n(9867),a=n(7200),c=n(7973),u=n(7254),l=n(7194),d=n(8216),h=n(3145),p=n(9274),f=n(4458),g=n(5721),m=n(348),x=n(1429),b=n(2678),v=n(1914),j=n(3727),y=n(2102),k=n(8910),S=n(2265),w=n(4825),P=n(8381),T=n(4997),Z=n(1821),I=n(5680),C=n(6443),_=n(8304),D=n(3967),N=n(2834);function O(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString()}t.default=(0,C.Z)((function(){var e=(0,a.p)(),t=(0,I.a)(),n=(0,o.useState)("text"),C=(0,s.Z)(n,2),F=C[0],E=C[1],A=(0,o.useState)(""),L=(0,s.Z)(A,2),R=L[0],z=L[1],B=(0,o.useState)(!1),J=(0,s.Z)(B,2),M=J[0],q=J[1],U=(0,o.useState)(!1),W=(0,s.Z)(U,2),H=W[0],K=W[1],Q=(0,o.useState)(!1),Y=(0,s.Z)(Q,2),G=Y[0],V=Y[1],X=(0,o.useState)(!1),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ne=(0,o.useState)(O(new Date)),re=(0,s.Z)(ne,2),ie=re[0],se=re[1],oe=(0,o.useState)(!0),ae=(0,s.Z)(oe,2),ce=ae[0],ue=ae[1],le=(0,o.useState)([{value:"monday",id:1},{value:"tuesday",id:2}]),de=(0,s.Z)(le,2),he=de[0],pe=(de[1],function(){var n=(0,i.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(q(!0),""!==R&&""!==F){n.next=5;break}return q(!1),e.isActive("post-submit-error")||e({id:"post-submit-error",status:"error",title:"Form Empty",description:"Content and type cannot be empty"}),n.abrupt("return");case 5:if(!G){n.next=8;break}return n.next=8,fetch(_.Z.api_server_url+"/api/p/linkedin/post",{headers:{"access-token":t.accessToken||""},method:"POST",body:JSON.stringify({content_type:F,text:R,data:{author:"",commentary:R,visibility:"PUBLIC",distribution:{feedDistribution:"MAIN_FEED",targetEntities:[],thirdPartyDistributionChannels:[]},lifecycleState:"PUBLISHED",isReshareDisabledByAuthor:!1}})}).then(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return n={},e.next=5,t.json().then((function(e){n=e}));case 5:throw new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.isActive("post-submit-api-success")||e({id:"post-submit-api-success",status:"success",title:"Submitted Post to Linkedin",description:"Posting now depends on linkedin"})})).catch((function(t){console.log("error",JSON.parse(null===t||void 0===t?void 0:t.message).error),e.isActive("post-submit-api-error")||e({id:"post-submit-api-error",status:"error",title:"Posting Failed for Linkedin",description:JSON.parse(null===t||void 0===t?void 0:t.message).error})})).finally((function(){console.log(R,F),q(!1)}));case 8:if(!H){n.next=13;break}return n.next=11,fetch(_.Z.api_server_url+"/api/p/twitter/tweets/create",{headers:{"access-token":t.accessToken||""},method:"POST",body:JSON.stringify({text:R})}).then(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.json(),!t.ok&&201!==t.status){e.next=3;break}return e.abrupt("return",n);case 3:throw new Error(JSON.stringify({body:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.isActive("post-submit-api-success")||e({id:"twitter-submit-api-success",status:"success",title:"Submitted Post to Twitter",description:"Posting now depends on twitter"})})).catch((function(t){console.log("error",JSON.parse(null===t||void 0===t?void 0:t.message).error),e.isActive("post-submit-api-error")||e({id:"twitter-submit-api-error",status:"error",title:"Posting Failed For Twitter!",description:JSON.parse(null===t||void 0===t?void 0:t.message).error})})).finally((function(){console.log(R,F),q(!1)}));case 11:n.next=14;break;case 13:q(!1);case 14:return n.abrupt("return");case 15:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}());return(0,N.jsx)(c.xu,{children:(0,N.jsx)(u.k,{minH:"80vh",align:"center",justify:"center",direction:"column",children:(0,N.jsx)(l.K,{spacing:4,mx:"auto",width:"full",py:4,px:4,children:(0,N.jsx)(c.xu,{borderWidth:"2px",rounded:"lg",shadow:"2px 2px 3px rgba(0,0,0,0.3)",minWidth:{base:"full",sm:"96"},bg:(0,d.ff)("white","gray.700"),p:8,m:"10px auto",as:"form",children:(0,N.jsx)(h.M,{columns:1,spacing:6,children:(0,N.jsxs)("form",{children:[(0,N.jsxs)(p.NI,{as:f.P,colSpan:[3,2],isRequired:!0,children:[(0,N.jsx)(g.l,{fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"gray.50"},children:"Post Type"}),(0,N.jsxs)(m.P,{placeholder:"Select post type",value:F,variant:"outline",w:"auto",onChange:function(e){E(e.currentTarget.value)},children:[(0,N.jsx)("option",{value:"image",disabled:!0,"aria-disabled":!0,children:"Image"}),(0,N.jsx)("option",{value:"poll",disabled:!0,"aria-disabled":!0,children:"Create a Poll"}),(0,N.jsx)("option",{value:"text",children:"Text"})]})]}),"poll"===F?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(p.NI,{mt:2,as:f.P,colSpan:[3,2],isRequired:!0,children:[(0,N.jsx)(g.l,{fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"white"},children:"Question"}),(0,N.jsx)(x.I,{p:2,placeholder:"Hey guys I just started using Socialhub",shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:R,onChange:function(e){z(e.currentTarget.value)}})]}),(0,N.jsxs)(p.NI,{mt:2,as:f.P,colSpan:[3,2],children:[(0,N.jsx)(b.E,{value:"1",onChange:function(){},children:(0,N.jsx)(l.K,{direction:"column",children:he.map((function(e){return(0,N.jsx)(v.Y,{value:e.value,textTransform:"capitalize",children:e.value},e.id)}))})}),(0,N.jsx)(p.Q6,{children:"Brief description for your profile. URLs are hyperlinked."})]})]}):(0,N.jsxs)(p.NI,{mt:2,as:f.P,colSpan:[3,2],isRequired:!0,children:[(0,N.jsx)(j.g,{p:2,placeholder:"Hey guys I just started using Socialhub",rows:10,shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:R,onChange:function(e){z(e.currentTarget.value)}}),(0,N.jsx)(p.Q6,{children:" "})]}),(0,N.jsxs)(p.NI,{as:h.M,columns:{base:2,lg:4},children:[(0,N.jsx)(g.l,{htmlFor:"isChecked",children:"Twitter"}),(0,N.jsx)(y.r,{id:"isChecked",marginRight:"auto",onChange:function(e){console.log(e.currentTarget.checked),K(e.currentTarget.checked)}}),(0,N.jsx)(g.l,{htmlFor:"isDisabled",children:"Linkedin"}),(0,N.jsx)(y.r,{id:"isDisabled",marginRight:"auto",onChange:function(e){console.log(e.currentTarget.checked),V(e.currentTarget.checked)}}),(0,N.jsx)(g.l,{htmlFor:"isFocusable",children:"Instagram"}),(0,N.jsx)(y.r,{id:"isFocusable",marginRight:"auto",isDisabled:!0}),(0,N.jsx)(g.l,{htmlFor:"isInvalid",children:"Facebook"}),(0,N.jsx)(y.r,{id:"isInvalid",marginRight:"auto",isDisabled:!0})]}),(0,N.jsx)(p.NI,{children:(0,N.jsxs)(l.K,{spacing:8,children:[(0,N.jsx)(k.L,{}),ce?(0,N.jsxs)(u.k,{dir:"row",gap:4,children:[(0,N.jsx)(S.z,{color:"white",_hover:{bg:"blue.600"},colorScheme:"linkedin",w:"full",maxW:"md",leftIcon:(0,N.jsx)(Z.pP6,{}),isLoading:M,onClick:pe,children:(0,N.jsx)(w.M,{children:(0,N.jsx)(P.x,{children:"Post on Socials"})})}),(0,N.jsx)(T.h,{icon:(0,N.jsx)(D.qyc,{}),"aria-label":"schedule post",onClick:function(){ue(!ce)}})]}):(0,N.jsxs)(l.K,{spacing:8,children:[(0,N.jsxs)(u.k,{dir:"row",gap:4,children:[(0,N.jsx)(S.z,{_hover:{bg:"blue.600",color:"white"},colorScheme:"linkedin",variant:"outline",w:"full",maxW:"md",leftIcon:(0,N.jsx)(D.qyc,{}),isLoading:ee,onClick:function(){var n=new Date(ie),r=new Date(n.getTime()+6e4*n.getTimezoneOffset()).toISOString();console.log(r),""!==R?(te(!0),fetch(_.Z.api_server_url+"/api/p/linkedin/schedule/post",{method:"POST",headers:{"access-token":t.accessToken||""},body:JSON.stringify({post_type:F,post_json:{author:"",commentary:R,visibility:"PUBLIC",distribution:{feedDistribution:"MAIN_FEED",targetEntities:[],thirdPartyDistributionChannels:[]},lifecycleState:"PUBLISHED",isReshareDisabledByAuthor:!1},scheduled_at:r})}).then((function(e){if(e.ok)return e.json();throw new Error("Error scheduling post!")})).then((function(t){console.log(t),e({status:"success",title:"Submitted post for scheduling",duration:5e3})})).catch((function(){})).finally((function(){te(!1)}))):e.isActive("post-empty")||e({id:"post-empty",status:"error",title:"Post content is empty!"})},children:(0,N.jsx)(w.M,{children:(0,N.jsx)(P.x,{children:"Schedule Post"})})}),(0,N.jsx)(T.h,{icon:(0,N.jsx)(D.qyc,{}),"aria-label":"schedule post",onClick:function(){ue(!ce)}})]}),(0,N.jsx)(x.I,{type:"datetime-local",value:ie.substring(0,16),onChange:function(e){console.log(new Date(e.currentTarget.value));var t=O(new Date(e.currentTarget.value));se(t)}})]})]})})]})})})})})})}))},6443:function(e,t,n){var r=n(1413),i=(n(9867),n(4670)),s=n(5680),o=n(7973),a=n(2834);t.Z=function(e){return function(t){var n=(0,s.a)();return(0,a.jsx)(o.xu,{h:"calc(100vh - 4rem)",overflowY:"auto",children:n.isAuthenticated?(0,a.jsx)(e,(0,r.Z)({},t)):(0,a.jsx)(i.Fg,{to:"/signin",replace:!0})})}}},5680:function(e,t,n){n.d(t,{a:function(){return s}});var r=n(9439),i=n(9867);function s(){var e=(0,i.useMemo)((function(){return function(e){var t=e.length+1;return document.cookie.split(";").map((function(e){return e.trim()})).filter((function(n){return n.substring(0,t)==="".concat(e,"=")})).map((function(e){return decodeURIComponent(e.substring(t))}))[0]||null}("access_token")}),[]),t=(0,i.useState)(null!=e&&void 0!==e&&""!==e),n=(0,r.Z)(t,2),s=n[0];n[1];return{isAuthenticated:s,accessToken:e}}}}]);
//# sourceMappingURL=postForm.0d31720c.chunk.js.map