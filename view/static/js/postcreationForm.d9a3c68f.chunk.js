"use strict";(self.webpackChunkreact_view=self.webpackChunkreact_view||[]).push([[840],{6699:function(e,t,n){n.d(t,{Z:function(){return r}});var r={api_server_url:"https://api.sociohub.live",path_prefix:"/api"}},6443:function(e,t,n){var r=n(1413),i=(n(9867),n(4670)),s=n(4438),o=n(7973),a=n(2834);t.Z=function(e){return function(t){var n=(0,s.a)();return(0,a.jsx)(o.xu,{h:"calc(100vh - 4rem)",overflowY:"auto",children:n.isAuthenticated?(0,a.jsx)(e,(0,r.Z)({},t)):(0,a.jsx)(i.Fg,{to:"/signin",replace:!0})})}}},4438:function(e,t,n){n.d(t,{a:function(){return o}});var r=n(9439),i=n(9867),s=n(2733);function o(){var e=(0,i.useMemo)((function(){return(0,s.e)("access_token")}),[]),t=(0,i.useState)(null!=e&&void 0!==e&&""!==e),n=(0,r.Z)(t,2),o=n[0];n[1];return{isAuthenticated:o,accessToken:e}}},4980:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var r=n(9439),i=n(9867),s=n(4165),o=n(5861),a=n(7200),c=n(7973),u=n(7254),l=n(7194),d=n(8216),h=n(3145),p=n(9274),f=n(4458),m=n(5721),x=n(348),v=n(1429),g=n(2678),b=n(1914),y=n(3727),j=n(2102),k=n(8910),w=n(295),Z=n(4825),S=n(8381),T=n(4997),P=n(4438),_=n(6443),C=n(6699),I=n(3967),E=n(9333),N=n(2834);function O(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString()}var D=(0,_.Z)((function(){var e=(0,a.p)(),t=(0,P.a)(),n=(0,i.useState)("text"),_=(0,r.Z)(n,2),D=_[0],H=_[1],F=(0,i.useState)(""),J=(0,r.Z)(F,2),A=J[0],L=J[1],R=(0,i.useState)(!1),z=(0,r.Z)(R,2),B=z[0],M=z[1],U=(0,i.useState)(!1),q=(0,r.Z)(U,2),W=q[0],K=q[1],Q=(0,i.useState)(!1),Y=(0,r.Z)(Q,2),G=Y[0],X=Y[1],V=(0,i.useState)(!1),$=(0,r.Z)(V,2),ee=$[0],te=$[1],ne=(0,i.useState)(O(new Date)),re=(0,r.Z)(ne,2),ie=re[0],se=re[1],oe=(0,i.useState)(!0),ae=(0,r.Z)(oe,2),ce=ae[0],ue=ae[1],le=(0,i.useState)([{value:"monday",id:1},{value:"tuesday",id:2}]),de=(0,r.Z)(le,2),he=de[0],pe=(de[1],function(){var n=(0,o.Z)((0,s.Z)().mark((function n(){var r;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(M(!0),""!==A&&""!==D){n.next=5;break}return M(!1),e.isActive("post-submit-error")||e({id:"post-submit-error",status:"error",title:"Form Empty",description:"Content and type cannot be empty"}),n.abrupt("return");case 5:if(r={post_text:A,post_type:"TEXT",creation_status:"DRAFT"},E.Z.post("/p/v1/posts",r).then((function(e){console.log(e)})),!G){n.next=10;break}return n.next=10,fetch(C.Z.api_server_url+"/api/p/linkedin/post",{headers:{"access-token":t.accessToken||""},method:"POST",body:JSON.stringify({content_type:D,text:A,data:{author:"",commentary:A,visibility:"PUBLIC",distribution:{feedDistribution:"MAIN_FEED",targetEntities:[],thirdPartyDistributionChannels:[]},lifecycleState:"PUBLISHED",isReshareDisabledByAuthor:!1}})}).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return n={},e.next=5,t.json().then((function(e){n=e}));case 5:throw new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.isActive("post-submit-api-success")||e({id:"post-submit-api-success",status:"success",title:"Submitted Post to Linkedin",description:"Posting now depends on linkedin"})})).catch((function(t){console.log("error",JSON.parse(null===t||void 0===t?void 0:t.message).error),e.isActive("post-submit-api-error")||e({id:"post-submit-api-error",status:"error",title:"Posting Failed for Linkedin",description:JSON.parse(null===t||void 0===t?void 0:t.message).error})})).finally((function(){console.log(A,D),M(!1)}));case 10:if(!W){n.next=15;break}return n.next=13,fetch(C.Z.api_server_url+"/api/p/twitter/tweets/create",{headers:{"access-token":t.accessToken||""},method:"POST",body:JSON.stringify({text:A})}).then(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.json(),!t.ok&&201!==t.status){e.next=3;break}return e.abrupt("return",n);case 3:throw new Error(JSON.stringify({body:n}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.isActive("post-submit-api-success")||e({id:"twitter-submit-api-success",status:"success",title:"Submitted Post to Twitter",description:"Posting now depends on twitter"})})).catch((function(t){console.log("error",JSON.parse(null===t||void 0===t?void 0:t.message).error),e.isActive("post-submit-api-error")||e({id:"twitter-submit-api-error",status:"error",title:"Posting Failed For Twitter!",description:JSON.parse(null===t||void 0===t?void 0:t.message).error})})).finally((function(){console.log(A,D),M(!1)}));case 13:n.next=16;break;case 15:M(!1);case 16:return n.abrupt("return");case 17:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}());return(0,N.jsx)(c.xu,{children:(0,N.jsx)(u.k,{minH:"80vh",align:"center",justify:"center",direction:"column",children:(0,N.jsx)(l.K,{spacing:4,mx:"auto",width:"full",py:4,px:4,children:(0,N.jsx)(c.xu,{borderWidth:"2px",rounded:"lg",shadow:"2px 2px 3px rgba(0,0,0,0.3)",minWidth:{base:"full",sm:"96"},bg:(0,d.ff)("white","gray.700"),p:8,m:"10px auto",children:(0,N.jsx)(h.M,{columns:1,spacing:6,children:(0,N.jsxs)("form",{children:[(0,N.jsxs)(p.NI,{as:f.P,colSpan:[3,2],isRequired:!0,children:[(0,N.jsx)(m.l,{fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"gray.50"},children:"Post Type"}),(0,N.jsxs)(x.P,{placeholder:"Select post type",value:D,variant:"outline",w:"auto",onChange:function(e){H(e.currentTarget.value)},children:[(0,N.jsx)("option",{value:"image",disabled:!0,"aria-disabled":!0,children:"Image"}),(0,N.jsx)("option",{value:"poll",disabled:!0,"aria-disabled":!0,children:"Create a Poll"}),(0,N.jsx)("option",{value:"text",children:"Text"})]})]}),"poll"===D?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(p.NI,{mt:2,as:f.P,colSpan:[3,2],isRequired:!0,children:[(0,N.jsx)(m.l,{fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"white"},children:"Question"}),(0,N.jsx)(v.I,{p:2,placeholder:"Hey guys I just started using Socialhub",shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:A,onChange:function(e){L(e.currentTarget.value)}})]}),(0,N.jsxs)(p.NI,{mt:2,as:f.P,colSpan:[3,2],children:[(0,N.jsx)(g.E,{value:"1",onChange:function(){},children:(0,N.jsx)(l.K,{direction:"column",children:he.map((function(e){return(0,N.jsx)(b.Y,{value:e.value,textTransform:"capitalize",children:e.value},e.id)}))})}),(0,N.jsx)(p.Q6,{children:"Brief description for your profile. URLs are hyperlinked."})]})]}):(0,N.jsxs)(p.NI,{mt:2,as:f.P,colSpan:[3,2],isRequired:!0,children:[(0,N.jsx)(y.g,{p:2,placeholder:"Hey guys I just started using Socialhub",rows:10,shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:A,onChange:function(e){L(e.currentTarget.value)}}),(0,N.jsx)(p.Q6,{children:" "})]}),(0,N.jsxs)(p.NI,{as:h.M,columns:{base:2,lg:4},children:[(0,N.jsx)(m.l,{htmlFor:"isChecked",children:"Twitter"}),(0,N.jsx)(j.r,{id:"isChecked",marginRight:"auto",onChange:function(e){console.log(e.currentTarget.checked),K(e.currentTarget.checked)}}),(0,N.jsx)(m.l,{htmlFor:"isDisabled",children:"Linkedin"}),(0,N.jsx)(j.r,{id:"isDisabled",marginRight:"auto",onChange:function(e){console.log(e.currentTarget.checked),X(e.currentTarget.checked)}}),(0,N.jsx)(m.l,{htmlFor:"isFocusable",children:"Instagram"}),(0,N.jsx)(j.r,{id:"isFocusable",marginRight:"auto",isDisabled:!0}),(0,N.jsx)(m.l,{htmlFor:"isInvalid",children:"Facebook"}),(0,N.jsx)(j.r,{id:"isInvalid",marginRight:"auto",isDisabled:!0})]}),(0,N.jsx)(p.NI,{children:(0,N.jsxs)(l.K,{spacing:8,children:[(0,N.jsx)(k.L,{}),ce?(0,N.jsxs)(u.k,{dir:"row",gap:4,children:[(0,N.jsx)(w.z,{colorScheme:"blue",w:"full",maxW:"md",isLoading:B,onClick:pe,children:(0,N.jsx)(Z.M,{children:(0,N.jsx)(S.x,{children:"Post on Socials"})})}),(0,N.jsx)(T.h,{icon:(0,N.jsx)(I.qyc,{}),"aria-label":"schedule post",onClick:function(){ue(!ce)}})]}):(0,N.jsxs)(l.K,{spacing:8,children:[(0,N.jsxs)(u.k,{dir:"row",gap:4,children:[(0,N.jsx)(w.z,{_hover:{bg:"blue.600",color:"white"},colorScheme:"linkedin",variant:"outline",w:"full",maxW:"md",leftIcon:(0,N.jsx)(I.qyc,{}),isLoading:ee,onClick:function(){var n=new Date(ie),r=new Date(n.getTime()+6e4*n.getTimezoneOffset()).toISOString();console.log(r),""!==A?(te(!0),fetch(C.Z.api_server_url+"/api/p/linkedin/schedule/post",{method:"POST",headers:{"access-token":t.accessToken||""},body:JSON.stringify({post_type:D,post_json:{author:"",commentary:A,visibility:"PUBLIC",distribution:{feedDistribution:"MAIN_FEED",targetEntities:[],thirdPartyDistributionChannels:[]},lifecycleState:"PUBLISHED",isReshareDisabledByAuthor:!1},scheduled_at:r})}).then((function(e){if(e.ok)return e.json();throw new Error("Error scheduling post!")})).then((function(t){console.log(t),e({status:"success",title:"Submitted post for scheduling",duration:5e3})})).catch((function(){})).finally((function(){te(!1)}))):e.isActive("post-empty")||e({id:"post-empty",status:"error",title:"Post content is empty!"})},children:(0,N.jsx)(Z.M,{children:(0,N.jsx)(S.x,{children:"Schedule Post"})})}),(0,N.jsx)(T.h,{icon:(0,N.jsx)(I.qyc,{}),"aria-label":"schedule post",onClick:function(){ue(!ce)}})]}),(0,N.jsx)(v.I,{type:"datetime-local",value:ie.substring(0,16),onChange:function(e){console.log(new Date(e.currentTarget.value));var t=O(new Date(e.currentTarget.value));se(t)}})]})]})})]})})})})})})}));function H(){var e=(0,i.useState)([]),t=(0,r.Z)(e,2);t[0],t[1];return(0,N.jsx)("div",{children:(0,N.jsx)(D,{})})}},9333:function(e,t,n){var r=n(4165),i=n(1413),s=n(5861),o=n(5671),a=n(3144),c=n(6699),u=n(2733),l=function(){function e(t,n){(0,o.Z)(this,e),this.apiHostname=void 0,this.commonHeaders=void 0,this.apiHostname=t.concat(null!==n&&void 0!==n?n:""),this.commonHeaders={"content-type":"application/json","access-token":(0,u.e)("access_token")||""}}return(0,a.Z)(e,[{key:"get",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var o=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){fetch(o.apiHostname.concat(t),{headers:(0,i.Z)((0,i.Z)({},o.commonHeaders),n&&n.headers),method:"GET"}).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:throw n=e.sent,new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e(t)})).catch((function(e){a(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n,o){var a=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){fetch(a.apiHostname.concat(t),{headers:(0,i.Z)((0,i.Z)({},a.commonHeaders),o&&o.headers),method:"POST",body:n&&JSON.stringify(n)}).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return e.next=4,t.json();case 4:throw n=e.sent,new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e(t)})).catch((function(e){c(e)})).finally((function(){}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"put",value:function(e,t,n){fetch(this.apiHostname.concat(e),{headers:(0,i.Z)((0,i.Z)({},this.commonHeaders),n&&n.headers),method:"PUT",body:t&&JSON.stringify(t)}).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return n={},e.next=5,t.json().then((function(e){n=e}));case 5:throw new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then().catch((function(){})).finally((function(){}))}},{key:"delete",value:function(e,t){fetch(this.apiHostname.concat(e),{headers:(0,i.Z)((0,i.Z)({},this.commonHeaders),t&&t.headers),method:"DELETE"}).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok&&201!==t.status){e.next=2;break}return e.abrupt("return",t.json());case 2:return n={},e.next=5,t.json().then((function(e){n=e}));case 5:throw new Error(JSON.stringify(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then().catch((function(){})).finally((function(){}))}}]),e}(),d=new l(c.Z.api_server_url,c.Z.path_prefix);t.Z=d},2733:function(e,t,n){function r(e){var t=e.length+1;return document.cookie.split(";").map((function(e){return e.trim()})).filter((function(n){return n.substring(0,t)==="".concat(e,"=")})).map((function(e){return decodeURIComponent(e.substring(t))}))[0]||null}n.d(t,{e:function(){return r}})}}]);
//# sourceMappingURL=postcreationForm.d9a3c68f.chunk.js.map