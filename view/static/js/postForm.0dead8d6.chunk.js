"use strict";(self.webpackChunkreact_view=self.webpackChunkreact_view||[]).push([[160],{8304:function(e,n){var t={api_server_url:"https://api.prakhar.works"};n.Z=t},1571:function(e,n,t){t.r(n);var r=t(4165),i=t(5861),o=t(9439),s=t(9867),a=t(7200),c=t(7973),l=t(7254),u=t(7194),d=t(8216),h=t(3145),p=t(9274),f=t(4458),x=t(5721),g=t(348),m=t(1429),j=t(2678),b=t(1914),v=t(3727),w=t(2102),y=t(8910),k=t(2265),S=t(4825),C=t(8381),T=t(4997),I=t(1821),Z=t(5680),_=t(83),P=t(8304),D=t(3967),O=t(2834);function E(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString()}n.default=(0,_.Z)((function(){var e=(0,a.p)(),n=(0,Z.a)(),t=(0,s.useState)("text"),_=(0,o.Z)(t,2),F=_[0],N=_[1],z=(0,s.useState)(""),L=(0,o.Z)(z,2),R=L[0],A=L[1],M=(0,s.useState)(!1),B=(0,o.Z)(M,2),q=B[0],H=B[1],W=(0,s.useState)(!1),J=(0,o.Z)(W,2),U=J[0],Y=J[1],K=(0,s.useState)(!1),Q=(0,o.Z)(K,2),G=Q[0],V=Q[1],X=(0,s.useState)(!1),$=(0,o.Z)(X,2),ee=$[0],ne=$[1],te=(0,s.useState)(E(new Date)),re=(0,o.Z)(te,2),ie=re[0],oe=re[1],se=(0,s.useState)(!0),ae=(0,o.Z)(se,2),ce=ae[0],le=ae[1],ue=(0,s.useState)([{value:"monday",id:1},{value:"tuesday",id:2}]),de=(0,o.Z)(ue,2),he=de[0],pe=(de[1],function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(H(!0),""!==R&&""!==F){t.next=5;break}return H(!1),e.isActive("post-submit-error")||e({id:"post-submit-error",status:"error",title:"Form Empty",description:"Content and type cannot be empty"}),t.abrupt("return");case 5:if(!G){t.next=8;break}return t.next=8,fetch(P.Z.api_server_url+"/app/linkedin/post",{headers:{"access-token":n.accessToken||""},method:"POST",body:JSON.stringify({content_type:F,text:R,data:{author:"",commentary:R,visibility:"PUBLIC",distribution:{feedDistribution:"MAIN_FEED",targetEntities:[],thirdPartyDistributionChannels:[]},lifecycleState:"PUBLISHED",isReshareDisabledByAuthor:!1}})}).then(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.ok&&201!==n.status){e.next=2;break}return e.abrupt("return",n.json());case 2:return t={},e.next=5,n.json().then((function(e){t=e}));case 5:throw new Error(JSON.stringify(t));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).then((function(n){e.isActive("post-submit-api-success")||e({id:"post-submit-api-success",status:"success",title:"Submitted Post to Linkedin",description:"Posting now depends on linkedin"})})).catch((function(n){console.log("error",JSON.parse(null===n||void 0===n?void 0:n.message).error),e.isActive("post-submit-api-error")||e({id:"post-submit-api-error",status:"error",title:"Posting Failed for Linkedin",description:JSON.parse(null===n||void 0===n?void 0:n.message).error})})).finally((function(){console.log(R,F),H(!1)}));case 8:if(!U){t.next=13;break}return t.next=11,fetch(P.Z.api_server_url+"/app/twitter/tweets/create",{headers:{"access-token":n.accessToken||""},method:"POST",body:JSON.stringify({text:R})}).then(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.ok&&201!==n.status){e.next=2;break}return e.abrupt("return",n.json());case 2:return t={},e.next=5,n.json().then((function(e){t=e}));case 5:throw new Error(JSON.stringify(t));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).then((function(n){e.isActive("post-submit-api-success")||e({id:"twitter-submit-api-success",status:"success",title:"Submitted Post to Twitter",description:"Posting now depends on twitter"})})).catch((function(n){console.log("error",JSON.parse(null===n||void 0===n?void 0:n.message).error),e.isActive("post-submit-api-error")||e({id:"twitter-submit-api-error",status:"error",title:"Posting Failed For Twitter!",description:JSON.parse(null===n||void 0===n?void 0:n.message).error})})).finally((function(){console.log(R,F),H(!1)}));case 11:t.next=14;break;case 13:H(!1);case 14:return t.abrupt("return");case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return(0,O.jsx)(c.xu,{children:(0,O.jsx)(l.k,{minH:"80vh",align:"center",justify:"center",direction:"column",children:(0,O.jsx)(u.K,{spacing:4,mx:"auto",width:"full",py:4,px:4,children:(0,O.jsx)(c.xu,{borderWidth:"2px",rounded:"lg",shadow:"2px 2px 3px rgba(0,0,0,0.3)",minWidth:{base:"full",sm:"96"},bg:(0,d.ff)("white","gray.700"),p:8,m:"10px auto",as:"form",children:(0,O.jsx)(h.M,{columns:1,spacing:6,children:(0,O.jsxs)("form",{children:[(0,O.jsxs)(p.NI,{as:f.P,colSpan:[3,2],isRequired:!0,children:[(0,O.jsx)(x.l,{fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"gray.50"},children:"Post Type"}),(0,O.jsxs)(g.P,{placeholder:"Select post type",value:F,variant:"outline",w:"auto",onChange:function(e){N(e.currentTarget.value)},children:[(0,O.jsx)("option",{value:"image",disabled:!0,"aria-disabled":!0,children:"Image"}),(0,O.jsx)("option",{value:"poll",disabled:!0,"aria-disabled":!0,children:"Create a Poll"}),(0,O.jsx)("option",{value:"text",children:"Text"})]})]}),"poll"===F?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(p.NI,{mt:2,as:f.P,colSpan:[3,2],isRequired:!0,children:[(0,O.jsx)(x.l,{fontSize:"sm",fontWeight:"md",color:"gray.700",_dark:{color:"white"},children:"Question"}),(0,O.jsx)(m.I,{p:2,placeholder:"Hey guys I just started using Socialhub",shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:R,onChange:function(e){A(e.currentTarget.value)}})]}),(0,O.jsxs)(p.NI,{mt:2,as:f.P,colSpan:[3,2],children:[(0,O.jsx)(j.E,{value:"1",onChange:function(){},children:(0,O.jsx)(u.K,{direction:"column",children:he.map((function(e){return(0,O.jsx)(b.Y,{value:e.value,textTransform:"capitalize",children:e.value},e.id)}))})}),(0,O.jsx)(p.Q6,{children:"Brief description for your profile. URLs are hyperlinked."})]})]}):(0,O.jsxs)(p.NI,{mt:2,as:f.P,colSpan:[3,2],isRequired:!0,children:[(0,O.jsx)(v.g,{p:2,placeholder:"Hey guys I just started using Socialhub",rows:10,shadow:"sm",focusBorderColor:"brand.400",fontSize:{sm:"sm"},value:R,onChange:function(e){A(e.currentTarget.value)}}),(0,O.jsx)(p.Q6,{children:" "})]}),(0,O.jsxs)(p.NI,{as:h.M,columns:{base:2,lg:4},children:[(0,O.jsx)(x.l,{htmlFor:"isChecked",children:"Twitter"}),(0,O.jsx)(w.r,{id:"isChecked",marginRight:"auto",onChange:function(e){console.log(e.currentTarget.checked),Y(e.currentTarget.checked)}}),(0,O.jsx)(x.l,{htmlFor:"isDisabled",children:"Linkedin"}),(0,O.jsx)(w.r,{id:"isDisabled",marginRight:"auto",onChange:function(e){console.log(e.currentTarget.checked),V(e.currentTarget.checked)}}),(0,O.jsx)(x.l,{htmlFor:"isFocusable",children:"Instagram"}),(0,O.jsx)(w.r,{id:"isFocusable",marginRight:"auto",isDisabled:!0}),(0,O.jsx)(x.l,{htmlFor:"isInvalid",children:"Facebook"}),(0,O.jsx)(w.r,{id:"isInvalid",marginRight:"auto",isDisabled:!0})]}),(0,O.jsx)(p.NI,{children:(0,O.jsxs)(u.K,{spacing:8,children:[(0,O.jsx)(y.L,{}),ce?(0,O.jsxs)(l.k,{dir:"row",gap:4,children:[(0,O.jsx)(k.z,{color:"white",_hover:{bg:"blue.600"},colorScheme:"linkedin",w:"full",maxW:"md",leftIcon:(0,O.jsx)(I.pP6,{}),isLoading:q,onClick:pe,children:(0,O.jsx)(S.M,{children:(0,O.jsx)(C.x,{children:"Post on Socials"})})}),(0,O.jsx)(T.h,{icon:(0,O.jsx)(D.qyc,{}),"aria-label":"schedule post",onClick:function(){le(!ce)}})]}):(0,O.jsxs)(u.K,{spacing:8,children:[(0,O.jsxs)(l.k,{dir:"row",gap:4,children:[(0,O.jsx)(k.z,{_hover:{bg:"blue.600",color:"white"},colorScheme:"linkedin",variant:"outline",w:"full",maxW:"md",leftIcon:(0,O.jsx)(D.qyc,{}),isLoading:ee,onClick:function(){var t=new Date(ie),r=new Date(t.getTime()+6e4*t.getTimezoneOffset()).toISOString();console.log(r),""!==R?(ne(!0),fetch(P.Z.api_server_url+"/app/linkedin/schedule/post",{method:"POST",headers:{"access-token":n.accessToken||""},body:JSON.stringify({post_type:F,post_json:{author:"",commentary:R,visibility:"PUBLIC",distribution:{feedDistribution:"MAIN_FEED",targetEntities:[],thirdPartyDistributionChannels:[]},lifecycleState:"PUBLISHED",isReshareDisabledByAuthor:!1},scheduled_at:r})}).then((function(e){if(e.ok)return e.json();throw new Error("Error scheduling post!")})).then((function(n){console.log(n),e({status:"success",title:"Submitted post for scheduling",duration:5e3})})).catch((function(){})).finally((function(){ne(!1)}))):e.isActive("post-empty")||e({id:"post-empty",status:"error",title:"Post content is empty!"})},children:(0,O.jsx)(S.M,{children:(0,O.jsx)(C.x,{children:"Schedule Post"})})}),(0,O.jsx)(T.h,{icon:(0,O.jsx)(D.qyc,{}),"aria-label":"schedule post",onClick:function(){le(!ce)}})]}),(0,O.jsx)(m.I,{type:"datetime-local",value:ie.substring(0,16),onChange:function(e){console.log(new Date(e.currentTarget.value));var n=E(new Date(e.currentTarget.value));oe(n)}})]})]})})]})})})})})})}))},83:function(e,n,t){t.d(n,{Z:function(){return W}});var r=t(1413),i=(t(9867),t(4670)),o=t(5680),s=t(5987),a=t(1130),c=t(7973),l=t(4343),u=t(198),d=t(3772),h=t(8216),p=t(7254),f=t(1221),x=t(8875),g=t(7733),m=t(213),j=t(4997),b=t(280),v=t(79),w=t(881),y=t(5501),k=t(7541),S=t(8381),C=t(8964),T=t(323),I=t(1042),Z=t(5644),_=t(7934),P=t(2265),D=t(1529),O=t(2834);function E(e){var n=(0,h.If)(),t=n.colorMode,i=n.toggleColorMode;return(0,O.jsx)(p.k,{h:"100vh",justifyContent:"center",alignItems:"center",children:(0,O.jsx)(P.z,(0,r.Z)((0,r.Z)({"aria-label":"Toggle Color Mode",onClick:i,_focus:{boxShadow:"none"},w:"fit-content"},e),{},{children:"light"===t?(0,O.jsx)(D.s1t,{}):(0,O.jsx)(D.eSY,{})}))})}var F=t(3967),N=t(1821),z=["onClose"],L=["icon","linkTo","children"],R=["onOpen","user"],A=[{name:"Home",icon:_.m6D,linkTo:"/home"},{name:"Create Post",icon:F.EIY,linkTo:"/post/new"},{name:"Linkedin",icon:N.n7M,linkTo:"/linkedin"},{name:"Twitter",icon:N.mWf,linkTo:"/twitter"}];function M(e){var n,t=e.children,r=(0,a.q)(),i=r.isOpen,o=r.onOpen,s=r.onClose;return(0,O.jsxs)(c.xu,{minH:"100vh",children:[(0,O.jsx)(B,{onClose:function(){return s},display:{base:"none",md:"block"}}),(0,O.jsxs)(l.d,{autoFocus:!1,isOpen:i,placement:"left",onClose:s,returnFocusOnClose:!1,onOverlayClick:s,size:"xs",children:[(0,O.jsx)(u.Z,{}),(0,O.jsx)(d.s,{width:"100px",children:(0,O.jsx)(B,{onClose:s})})]}),(0,O.jsx)(H,{onOpen:o,user:{username:null===(n=window.localStorage.getItem("current_username"))||void 0===n?void 0:n.toUpperCase(),userType:window.localStorage.getItem("organisation_group_id"),imagSrc:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&h=200&q=80",imgSrc:"https://images.unsplash.com/photo-1619946794135-5bc917a27793?ixlib=rb-0.3.5&q=80&fm=jpg&crop=faces&fit=crop&h=200&w=200&s=b616b2c5b373a80ffc9636ba24f7a4a9"}}),(0,O.jsx)(c.xu,{ml:{base:0,md:60},children:t})]})}var B=function(e){var n=e.onClose,t=(0,s.Z)(e,z);return(0,O.jsxs)(c.xu,(0,r.Z)((0,r.Z)({bg:(0,h.ff)("white","gray.900"),borderRight:"1px",borderRightColor:(0,h.ff)("gray.200","gray.700"),w:{base:"full",md:60},pos:"fixed",h:"full"},t),{},{children:[(0,O.jsxs)(p.k,{h:"20",alignItems:"center",mx:8,justifyContent:"space-between",children:[(0,O.jsx)(f.r,{as:Z.rU,to:"/",children:(0,O.jsx)(x.E,{src:"/logo.png",alt:"Logo",w:36})}),(0,O.jsx)(g.P,{display:{base:"flex",md:"none"},onClick:n})]}),A.map((function(e){return(0,O.jsx)(q,{icon:e.icon,linkTo:e.linkTo,children:e.name},e.name)}))]}))},q=function(e){var n=e.icon,t=e.linkTo,i=e.children,o=(0,s.Z)(e,L);return(0,O.jsx)(f.r,{_activeLink:{color:"cyan.500",fontWeight:700},as:Z.OL,to:t,style:{textDecoration:"none"},_focus:{boxShadow:"none"},children:(0,O.jsxs)(p.k,(0,r.Z)((0,r.Z)({align:"center",borderRadius:"lg",p:"4",mx:"4",role:"group",cursor:"pointer",_hover:{bg:"cyan.400",color:"white"}},o),{},{children:[n&&(0,O.jsx)(m.J,{mr:"4",fontSize:"16",_groupHover:{color:"white"},as:n}),i]}))})},H=function(e){var n=e.onOpen,t=e.user,o=(0,s.Z)(e,R),a=(0,i.s0)();return(0,O.jsxs)(p.k,(0,r.Z)((0,r.Z)({ml:{base:0,md:60},px:{base:4,md:4},height:"16",alignItems:"center",bg:(0,h.ff)("white","gray.900"),borderBottomWidth:"1px",borderBottomColor:(0,h.ff)("gray.200","gray.700"),justifyContent:{base:"space-between",md:"flex-end"}},o),{},{children:[(0,O.jsx)(j.h,{display:{base:"flex",md:"none"},onClick:n,variant:"outline","aria-label":"open menu",icon:(0,O.jsx)(_.cur,{})}),(0,O.jsx)(x.E,{display:{base:"flex",md:"none"},src:"/logo.png",alt:"Logo",w:32}),(0,O.jsxs)(b.U,{spacing:{base:"0",md:"6"},children:[(0,O.jsx)(j.h,{size:"lg",variant:"ghost","aria-label":"notifications",icon:(0,O.jsx)(_.vWP,{})}),(0,O.jsx)(E,{}),(0,O.jsx)(p.k,{alignItems:"center",children:(0,O.jsxs)(v.v,{children:[(0,O.jsx)(w.j,{py:2,transition:"all 0.3s",_focus:{boxShadow:"none"},children:(0,O.jsxs)(b.U,{children:[(0,O.jsx)(y.q,{size:"md",src:t.imgSrc}),(0,O.jsxs)(k.g,{display:{base:"none",md:"flex"},alignItems:"flex-start",spacing:"1px",ml:"2",children:[(0,O.jsx)(S.x,{fontSize:"sm",children:t.username}),(0,O.jsx)(S.x,{fontSize:"xs",color:"gray.600",children:t.userType})]}),(0,O.jsx)(c.xu,{display:{base:"none",md:"flex"},children:(0,O.jsx)(_.bTu,{})})]})}),(0,O.jsxs)(C.q,{bg:(0,h.ff)("white","gray.900"),borderColor:(0,h.ff)("gray.200","gray.700"),children:[(0,O.jsx)(T.s,{children:"Profile"}),(0,O.jsx)(I.R,{}),(0,O.jsx)(T.s,{onClick:function(){window.localStorage.removeItem("authenticated"),window.localStorage.removeItem("access_token"),window.localStorage.removeItem("username"),window.localStorage.removeItem("organisation_group_id"),document.cookie="access_token=; Path=/;",a("/signin")},children:"Sign out"})]})]})})]})]}))},W=function(e){return function(n){var t=(0,o.a)();return(0,O.jsx)(M,{children:(0,O.jsx)(c.xu,{h:"calc(100vh - 4rem)",overflowY:"auto",children:t.isAuthenticated?(0,O.jsx)(e,(0,r.Z)({},n)):(0,O.jsx)(i.Fg,{to:"/signin",replace:!0})})})}}},5680:function(e,n,t){t.d(n,{a:function(){return o}});var r=t(9439),i=t(9867);function o(){var e=(0,i.useMemo)((function(){return function(e){var n=e.length+1;return document.cookie.split(";").map((function(e){return e.trim()})).filter((function(t){return t.substring(0,n)==="".concat(e,"=")})).map((function(e){return decodeURIComponent(e.substring(n))}))[0]||null}("access_token")}),[]),n=(0,i.useState)(null!=e&&void 0!==e&&""!==e),t=(0,r.Z)(n,2);t[0],t[1];return{isAuthenticated:!0,accessToken:e}}}}]);
//# sourceMappingURL=postForm.0dead8d6.chunk.js.map